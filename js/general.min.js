var $=jQuery,BH_general={params:{template:js_globals.template_url,api:js_globals.template_url+"/api/",timeout:400,sideslider:"",sel:"",side_menu:"",mobile_menu_right:"",mobile_menu_width:"",mobile_menu_level:1,mobile_menu_ancestors:[]},init:function(){BH_general.newsletter_top_menu(),BH_general.mobile_menu(),$(".faqs li .question").click(function(){$(this).toggleClass("expanded"),$(this).next().next().slideToggle(BH_general.params.timeout)}),$(".page-content").find("iframe, object, embed").each(function(){if("chekout_frame"!=$(this).attr("name")&&"pelecard_frame"!=$(this).attr("name")){var e=$(this).attr("src");$(this).wrap("<div class='flex-video'></div>"),e.indexOf("youtube.com")>=0&&(e=e.concat("/?showinfo=0&autohide=1&rel=0&wmode=transparent"),$(this).attr("src",e),$(this).attr("wmode","Opaque"))}}),$.fn.setAllToMaxHeight=function(){return this.height(Math.max.apply(this,$.map(this,function(e){return $(e).height()})))},$("body").hasClass("archive")&&$("body").hasClass("woocommerce")&&BH_general.shop_related_products();for(var e=["tax-product_cat","tax-occasion","tax-artist","search"],t=0;t<e.length;t++)if($("body").hasClass(e[t])){BH_general.shop_archive();break}$("body").hasClass("single-product")&&BH_general.shop_single_product(),$("body").hasClass("page-template-shop-why-shop-with-us")&&BH_general.shop_wswu_banners(),$(".shop-footer .link-box").setAllToMaxHeight()},newsletter_top_menu:function(){newsletter_menu_item=$(".menu-item-newsletter a"),newsletter_widget=newsletter_menu_item.parent().find(".newsletter-widget"),newsletter_widget_close=newsletter_widget.find(".glyphicon-remove"),newsletter_menu_item.click(function(){newsletter_widget.fadeToggle(),$(this).parent().toggleClass("current-menu-item"),BH_general.newsletter_popup("set")}),newsletter_widget_close.click(function(){newsletter_widget.fadeOut(),newsletter_menu_item.parent().removeClass("current-menu-item"),BH_general.newsletter_popup("set")}),BH_general.newsletter_popup("open")},newsletter_popup:function(e){newsletter_menu_item=$(".menu-item-newsletter a"),newsletter_widget=newsletter_menu_item.parent().find(".newsletter-widget"),newsletter_widget_close=newsletter_widget.find(".glyphicon-remove"),$.ajax({url:BH_general.params.api+"newsletter-popup.php",type:"POST",data:{action:e},error:function(){return!1},success:function(t){var n=JSON.parse(t);return 0==n.status?("open"!=e||"popup"!=n.operation||newsletter_menu_item.parent().hasClass("current-menu-item")||(newsletter_widget.fadeIn(),newsletter_menu_item.parent().addClass("current-menu-item")),!0):!1}})},mobile_menu:function(){BH_general.params.sideslider=$("[data-toggle=collapse-side]"),BH_general.params.sel=BH_general.params.sideslider.attr("data-target"),side_menu=function(){BH_general.params.sideslider.unbind("click",side_menu),$(BH_general.params.sel).toggleClass("in"),$('.side-menu[menu-level="1"]').toggle(),$(".side-column").css("width",BH_general.params.mobile_menu_right),BH_general.params.mobile_menu_ancestors.push(0)},BH_general.params.sideslider.bind("click",side_menu),$(".side-menu").each(function(){var e=$(this).attr("menu-level"),t=100*(e-1);$("body").hasClass("rtl")?$(this).css("left",t+"%"):$(this).css("right",t+"%")}),$(".side-menu .menu-item-has-children").each(function(){var e=$(this);if($(this).children("a").attr("href")){var t=$(this).children("a").attr("item"),n=$('.side-menu[menu-parent="'+t+'"]');e.clone().prependTo(n.children("nav").children("ul")),$(this).children("a").removeAttr("href"),n.find("li.menu-item-"+t).removeClass("menu-item-has-children"),n.find("li.menu-item-"+t).addClass("cloned-menu-item")}}),$(".side-menu .menu-item-has-children").click(function(){var e=$(this).parents(".side-menu"),t=parseInt(e.attr("menu-level")),n=$(this).children("a").attr("item");sub_menu=$('.side-menu[menu-parent="'+n+'"]'),sub_menu.show(),BH_general.params.mobile_menu_level=t+1,BH_general.mobile_menu_pos(t+1),BH_general.params.mobile_menu_ancestors.push(n)}),$(".side-menu-top span").click(function(){var e=$(this).parent().parent();BH_general.hide_side_menu(e)}),$(".side-column").click(function(){var e=$('.side-menu[menu-parent="'+BH_general.params.mobile_menu_ancestors[BH_general.params.mobile_menu_ancestors.length-1]+'"]');BH_general.hide_side_menu(e)})},hide_side_menu:function(e){1==BH_general.params.mobile_menu_level?($(BH_general.params.sel).toggleClass("in"),setTimeout(function(){$('.side-menu[menu-level="1"]').toggle(),BH_general.params.sideslider.bind("click",side_menu),$(".side-column").css("width",0)},BH_general.params.timeout)):(BH_general.params.mobile_menu_level--,BH_general.mobile_menu_pos(BH_general.params.mobile_menu_level),setTimeout(function(){e.hide()},BH_general.params.timeout)),BH_general.params.mobile_menu_ancestors.pop()},mobile_menu_pos:function(e){var t=-1*(e-1)*$(window).width()+e*BH_general.params.mobile_menu_right;$("body").hasClass("rtl")?$(".navbar .side-collapse").css({left:t+"px"}):$(".navbar .side-collapse").css({right:t+"px"}),$(".navbar .side-collapse").css({width:BH_general.params.mobile_menu_width+"px"})},shop_archive:function(){BH_general.show_recently_viewed()},shop_single_product:function(){BH_general.add_recently_viewed(),$("#gallery-navigator li").click(function(){if(!$(this).hasClass("active")){var e=$("#gallery-main-item"),t=$(this);current_attachment=t.attr("data-thumbnail"),$("#gallery-navigator li").removeClass("active"),t.addClass("active"),e.stop().fadeOut(BH_general.params.timeout),setTimeout(function(){e.html(_BH_product_attachments[current_attachment].shop_single.img).fadeIn(BH_general.params.timeout);var t=$("#gallery-main-item").data("elevateZoom");t.swaptheimage(_BH_product_attachments[current_attachment].shop_single.src,_BH_product_attachments[current_attachment].full.src)},BH_general.params.timeout)}}),$("#gallery-main-item").elevateZoom({zoomType:"inner",cursor:"crosshair",zoomWindowFadeIn:500,zoomWindowFadeOut:500,easing:!0}),BH_general.shop_related_products()},show_recently_viewed:function(){$(".recently-products-slider-placeholder").hide(),$.ajax({url:BH_general.params.api+"recently-viewed.php",type:"POST",data:{action:"show"},error:function(){return!1},success:function(e){return e.length?(BH_general.recently_viewed_content(e),$(".recently-products-slider-placeholder").fadeIn(BH_general.params.timeout),!0):!1}})},add_recently_viewed:function(){var e="",t=$("body").attr("class").split(/\s+/);$.each(t,function(t,n){n.indexOf("postid")>=0&&(e=n.substr(n.indexOf("-")+1))}),e&&($(".recently-products-slider-placeholder").hide(),$.ajax({url:BH_general.params.api+"recently-viewed.php",type:"POST",data:{action:"add",postid:e},error:function(){return!1},success:function(e){return e.length?(BH_general.recently_viewed_content(e),$(".recently-products-slider-placeholder").fadeIn(BH_general.params.timeout),!0):!1}}))},remove_recently_viewed:function(e){var t=e.attr("data-postid");t&&($(".recently-products-slider-placeholder").fadeOut(BH_general.params.timeout),$.ajax({url:BH_general.params.api+"recently-viewed.php",type:"POST",data:{action:"remove",postid:t},error:function(){return!1},success:function(e){var t=$(".recently-products-slider");return t.cycle("destroy"),e.length?(BH_general.recently_viewed_content(e),$(".recently-products-slider-placeholder").fadeIn(BH_general.params.timeout),!0):(t.html(""),!1)}}))},recently_viewed_content:function(e){var t=$(".recently-products-slider"),n=/<li/gm,a=e.match(n);a=a?a.length:0,7>=a?$("#recently-products-slider-prev, #recently-products-slider-next").css("visibility","hidden"):(a=7,$("#recently-products-slider-prev, #recently-products-slider-next").css("visibility","visible")),t.attr("data-cycle-carousel-visible",a),t.html(e),t.cycle(),$(".recently-products-slider").on("click",".glyphicon-remove",function(){return BH_general.remove_recently_viewed($(this).parent()),!1})},shop_related_products:function(){var e=$(".related-slider");e.cycle(),$(".related-slider-placeholder").fadeIn(BH_general.params.timeout)},shop_wswu_banners:function(){for(var e=$(".col-shop-wswu").length,t=1e3,n=1250,a=0,r=0;e>r;r++)setTimeout(function(e){$(".col-shop-wswu:eq("+e+")").find(".image-wrapper").fadeIn(t)},r*(t+n+a),r),setTimeout(function(e){$(".col-shop-wswu:eq("+e+")").addClass("active")},r*(t+n+a)+t+n,r)},loaded:function(){$(window).resize(BH_general.alignments).resize()},alignments:function(){function e(e){var t,n;e.matches?(t=$(window).width(),n=$(".navbar .container").width(),BH_general.params.mobile_menu_right=(t-n)/2+54,BH_general.params.mobile_menu_width=t-BH_general.params.mobile_menu_right):(BH_general.params.mobile_menu_right=0,BH_general.params.mobile_menu_width=t),BH_general.params.mobile_menu_ancestors.length&&$(".side-column").css("width",BH_general.params.mobile_menu_right),BH_general.mobile_menu_pos(BH_general.params.mobile_menu_level)}if(matchMedia){var t=window.matchMedia("(max-width: 1199px)");t.addListener(e),e(t)}}};!function(e){function t(){}for(var n,a="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(",");n=a.pop();)e[n]=e[n]||t}(function(){try{return console.log(),window.console}catch(e){return window.console={}}}()),$(BH_general.init),$(window).load(BH_general.loaded);