!function(i){"use strict";var e=jQuery,t={_index:0,_cycleId:null,_active:!1,_sliding:!1,container:null,descriptionContainer:null,interval:6e3,slideTimeout:1200,activeDesc:!1,injectDesc:function(){var i=this;i.items[i._index]&&(i.descriptionContainer.find(".desc-link").each(function(){e(this).attr("href",i.items[i._index].link)}),i.descriptionContainer.find("#category").each(function(){e(this).html(i.items[i._index].category)}),i.descriptionContainer.find("#title").each(function(){e(this).html(i.items[i._index].title)}),i.descriptionContainer.find("#date").each(function(){e(this).html(i.items[i._index].date_html)}),i.descriptionContainer.find("#text").each(function(){e(this).html(i.items[i._index].text)}))},setSliding:function(){var i=this;this._sliding=!0,setTimeout(function(){i._sliding=!1},this.slideTimeout)},isSliding:function(){return this._sliding},slideDown:function(){this.isSliding()||(this.setSliding(),this.slideToIndex(this._index+1))},slideUp:function(){this.isSliding()||(this.setSliding(),this.slideToIndex(this._index-1))},slideToIndex:function(i){var t,n=this,s=this.container.height();this.container.removeClass("slides-reset"),this.container.css("top",(-1*i*s-s).toString()+"px"),i===this.itemsCount?(t=0,setTimeout(function(){n.container.addClass("slides-reset"),n.container.css("top",(-1*s).toString()+"px")},1200)):-1===i?(t=this.itemsCount-1,setTimeout(function(){n.container.addClass("slides-reset"),n.container.css("top",(-1*n.itemsCount*s).toString()+"px")},1200)):t=i,e("#mini-gallery").find(".mini-gallery-item-wrapper").each(function(){e(this).attr("index")==n._index.toString()?e(this).removeClass("active-item"):e(this).attr("index")==t.toString()&&e(this).addClass("active-item")}),this._index=t,e("#description-cell").addClass("description-cell-move"),n.activeDesc||n.descriptionContainer.addClass("ad-hoc"),setTimeout(function(){e("#description-cell").removeClass("description-cell-move"),n.descriptionContainer.removeClass("ad-hoc"),n.injectDesc()},800)},isActive:function(){return this._active},go:function(){var i=this;this.isActive()||(this._cycleId=setInterval(function(){i.slideDown()},i.interval),this._active=!0)},stop:function(){var i=this;clearInterval(i._cycleId),this._active=!1},showDesc:function(){var i=this;this.stop(),this.descriptionContainer.addClass("description-show"),this.miniGalleryContainer.addClass("mini-gallery-show"),setTimeout(function(){i.activeDesc&&(e("#up-arrow").addClass("up-arrow-show"),e("#down-arrow").addClass("down-arrow-show"))},600),this.activeDesc=!0},hideDesc:function(){e("#up-arrow").removeClass("up-arrow-show"),e("#down-arrow").removeClass("down-arrow-show"),this.descriptionContainer.removeClass("description-show"),this.miniGalleryContainer.removeClass("mini-gallery-show"),this.go(),this.activeDesc=!1}};e(function(){function n(i){return 0===e(i).parents("#slideshow-wrapper").length?!1:!0}t.container=e("#slides"),t.descriptionContainer=e("#description-wrapper"),t.miniGalleryContainer=e("#mini-gallery"),t.itemsCount=e("#slides img").length-2,t.items=i.items||{},e("#slideshow-wrapper").mouseover(function(i){n(i.toTarget)||n(i.relatedTarget)||t.showDesc()}),e("#slideshow-wrapper").mouseout(function(i){n(i.toTarget)||n(i.relatedTarget)||t.hideDesc()}),e("#mini-gallery .mini-gallery-item-wrapper").click(function(){t.slideToIndex(parseInt(e(this).attr("index")))}),e("#up-arrow").click(function(){t.slideUp()}),e("#down-arrow").click(function(){t.slideDown()}),e(i).on("keydown",function(i){t.activeDesc||t.stop(),"40"==i.keyCode?(i.preventDefault(),t.slideDown()):"38"==i.keyCode&&(i.preventDefault(),t.slideUp()),t.activeDesc||t.go()}),t.injectDesc(),t.go(),e(i).resize(function(){t.slideToIndex(t._index)}),e(i).focus(function(){t.go()}),e(i).blur(function(){t.stop()}),i.bh_slideshow=t})}(window,document);